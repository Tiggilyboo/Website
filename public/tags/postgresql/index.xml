<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Postgresql on Simon Willshire</title>
    <link>http://simonwillshire.com/tags/postgresql/</link>
    <description>Recent content in Postgresql on Simon Willshire</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 31 Mar 2016 15:04:15 -0400</lastBuildDate>
    <atom:link href="http://simonwillshire.com/tags/postgresql/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Adventures In Scala - Part 1: play-scala-intro</title>
      <link>http://simonwillshire.com/blog/Adventures-In-Scala-Part-1/</link>
      <pubDate>Thu, 31 Mar 2016 15:04:15 -0400</pubDate>
      
      <guid>http://simonwillshire.com/blog/Adventures-In-Scala-Part-1/</guid>
      <description>

&lt;h2 id=&#34;learning-scala-part-1-play-scala-intro:5f532f32294033124988595e1c89a575&#34;&gt;Learning Scala Part 1 - play-scala-intro&lt;/h2&gt;

&lt;p&gt;So, as of writing this, my background is primarily C#. This post is the first part of a series which will document my transition into all things Scala. I will be writing a step by step on creating a simple web stack.&lt;/p&gt;

&lt;h3 id=&#34;my-setup:5f532f32294033124988595e1c89a575&#34;&gt;My Setup&lt;/h3&gt;

&lt;p&gt;I&amp;rsquo;ll be using Linux Mint 17.3, but most flavours of debian should work for any of my bash.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;PostgreSQL 9.3.11&lt;/li&gt;
&lt;li&gt;IntelliJ IDEA, targeting Open JDK 1.8_72&lt;/li&gt;
&lt;li&gt;Scala 2.11 with SBT, SSP, HOCON&lt;/li&gt;
&lt;li&gt;Play! 2.5.1 Framework (Using IntelliJ&amp;rsquo;s plugin)&lt;/li&gt;
&lt;li&gt;Slick&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Install our software packages&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ apt-get update
$ apt-get install postgresql postgresql-contrib openjdk-8-jdk
$ wget https://www.jetbrains.com/idea/download/download-thanks.html?platform=linux
$ sudo tar -xvzf ideaIU-2016.1.1.tar.gz -C /usr/share/intellij/
$ cd /usr/share/intellij
$ sudo bash ./idea.sh
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;em&gt;If you&amp;rsquo;re missing the openjdk-8-jdk package, add it to your repo list with &lt;code&gt;add-apt-repository ppa:openjdk-r/ppa&lt;/code&gt;&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;set-up-our-postgresql-db:5f532f32294033124988595e1c89a575&#34;&gt;Set up our PostgreSQL DB&lt;/h3&gt;

&lt;p&gt;By default, postgres creates a user named &amp;lsquo;postgres&amp;rsquo;, we want to login to them, and start up our postgres console in the default &amp;lsquo;postgres&amp;rsquo; database.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sudo su postgres
$ psql -d postgres -U postgres
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;Create a user and db. Connect to it, and set new user&amp;rsquo;s permissions to rw.&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-SQL&#34;&gt;postgres=# CREATE USER scalaplay WITH PASSWORD &#39;&amp;lt;Password&amp;gt;&#39;
postgres=# CREATE DATABASE scalaplaydb;
postgres=# \c scalaplaydb
postgres=# REVOKE ALL ON DATABASE scalaplaydb FROM PUBLIC;
postgres=# REVOKE ALL ON SCHEMA public FROM PUBLIC;
postgres=# GRANT CONNECT ON DATABASE scalaplaydb TO scalaPlay;
postgres=# GRANT SELECT,UPDATE,INSERT,DELETE ON ALL TABLES IN SCHEMA public TO scalaplay;
postgres=# GRANT SELECT,UPDATE ON ALL SEQUENCES IN SCHEMA public TO scalaplay;
postgres=# GRANT USAGE ON SCHEMA public TO scalaplay;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;If you want to have new tables with privileges already granted for previous users, run this&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-SQL&#34;&gt;postgres=# ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT,UPDATE,INSERT,DELETE ON TABLES TO scalaplay;
postgres=# ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT,UPDATE ON  SEQUENCES TO scalaplay;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Some handy user check commands if you&amp;rsquo;re not sure what users can do what:&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-SQL&#34;&gt;postgres=# \du            ; Displays user roles with attributes/membership
postgres=# \l             ; Displays db list, with access privileges
postgres=# \z             ; Displays access privileges to schemas
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;Let&amp;rsquo;s make some sample tables to interact with later&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-SQL&#34;&gt;postgres=# CREATE TABLE &amp;lt;name&amp;gt;(...)
...
postgres=# \q
postgres=# exit
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;play-2-x-framework-template:5f532f32294033124988595e1c89a575&#34;&gt;Play 2.X Framework Template&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;Grab a sample play framework project template to load into IntelliJ&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ wget https://www.lightbend.com/activator/template/bundle/play-scala-intro.zip
$ unzip play-scala-intro -d ~/play/
$ sudo ./$HOME/play/play-scala-intro/bin/activator ui
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Select the &amp;lsquo;scala-play-intro&amp;rsquo; template, and create it. This may take a bit of downloading Open the project in IntelliJ&amp;hellip;&lt;/p&gt;

&lt;h4 id=&#34;potential-issues:5f532f32294033124988595e1c89a575&#34;&gt;Potential Issues&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;If you get a &lt;code&gt;java.io.FileNotFoundException: (Permission denied)&lt;/code&gt;, you may want to &lt;code&gt;sudo chown &amp;lt;user&amp;gt;:&amp;lt;user&amp;gt; -R ~/scala-play-intro&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;If you get a &lt;code&gt;java.lang.UnsupportedClassVersionError: ... Unsupported major.minor version 52.0&lt;/code&gt; or similar, ensure you are targeting the project to Java 1.8 through the IDE&amp;rsquo;s project settings with (File -&amp;gt; Project Structure). Also, you may want to make sure you set the java alternatives using:&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sudo update-alternatives --config java
$ sudo update-alternatives --config javac
$ java -version
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;other-sources:5f532f32294033124988595e1c89a575&#34;&gt;Other Sources&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jetbrains.com/help/idea/2016.1/getting-started-with-play-2-x.html?origin=old_help&#34;&gt;Follow the handy JetBrains Play 2.X tutorial&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/playframework/playframework/tree/master/templates/play-scala-intro&#34;&gt;&lt;span class=&#34;fa fa-github&#34;&gt;&lt;/span&gt; View or Clone the template&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>